"use strict";(self.webpackChunkdones=self.webpackChunkdones||[]).push([[702],{9702:function(e,s,r){r.r(s),r.d(s,{default:function(){return b}});var a=r(1413),n=r(885),o=r(2791),t=r(8033),i=r(1373),u=r(6152),d=r(3504),l=r(3226),c=r(1097),m=r(3496),f=r(184),p=function(e){var s=e.data,r=e.subgroups,a=e.title,n=Object.keys(s).filter((function(e){return"id"!==e})),o=[{data:n.map((function(e){return s[e]}))}],t=Object.values(r).reduce((function(e,s,r){return e[s]||(e[s]={text:s,x:r}),e}),{}),i={chart:{height:200,type:"radar"},title:{text:a},xaxis:{categories:n},annotations:{position:"front",labels:Object.values(t)}};return(0,f.jsx)(m.Z,{options:i,series:o,type:"radar",height:300})};u.kL.register(u.uw,u.f$,u.ZL,u.Dx,u.u,u.De);var g={indexAxis:"y",elements:{bar:{borderWidth:1}},responsive:!0,plugins:{datalabels:{display:!0},legend:{display:!1},title:{display:!0,text:"Mis dones",fontSize:18}}},h=o.forwardRef((function(e,s){return(0,f.jsxs)("div",{ref:s,className:"results",children:[(0,f.jsx)("div",{className:"result-graphic",children:e.resultado&&(0,f.jsx)(p,{title:"Mis dones: "+e.user,data:e.resultado,subgroups:e.subgroups})}),(0,f.jsx)("div",{className:"dones",children:e.dones.slice(0,3).map((function(e,s){return(0,f.jsx)(l.Z,{data:e},s)}))}),"Fuente: joel5vega.github.io/dones"]})}));var v=function(e){var s=e.dones,r=e.dones.map((function(e){return e.name})).slice(0,4),a=(0,o.useRef)(),n={labels:r,datasets:[{label:"Dones",data:s.map((function(e){return e.score})).slice(0,4),backgroundColor:"#3952b2"}]};return(0,f.jsx)("div",{className:"resultados",children:e.show&&(0,f.jsxs)(o.Fragment,{children:[(0,f.jsx)(h,{ref:a,options:g,data:n,dones:s,resultado:e.resultado,subgroups:e.subgroups,user:e.user.displayName.split(" ")[0]}),(0,f.jsx)("div",{className:"boton",onClick:function(){return(0,c.exportComponentAsJPEG)(a,{fileName:"misdones"})},children:"Descargar resultados"}),(0,f.jsx)(d.rU,{style:{margin:"2rem",color:"var(--fondo)",background:"var(--activo)",padding:"1rem",minHeight:"1rem ",borderRadius:"1rem"},to:"/lista",onClick:function(){return(0,c.exportComponentAsJPEG)(a,{fileName:"misdones"})},children:"Ver listado de todos los dones"})]})})},x=(0,o.lazy)((function(){return Promise.all([r.e(632),r.e(395)]).then(r.bind(r,2395))}));var b=function(e){var s=(0,o.useState)({}),r=(0,n.Z)(s,2),u=(r[0],r[1],(0,o.useState)([])),d=(0,n.Z)(u,2),l=d[0],c=d[1],m=(0,o.useState)(e.user?e.answers:t.Z),p=(0,n.Z)(m,2),g=p[0],h=p[1],b=(0,o.useState)(i.Z),j=(0,n.Z)(b,2),S=j[0],Z=j[1],C=(0,o.useState)(!1),y=(0,n.Z)(C,2),w=y[0],k=y[1],M=(0,o.useState)(0),P=(0,n.Z)(M,2),D=(P[0],P[1],(0,o.useState)(!1)),N=(0,n.Z)(D,2),A=(N[0],N[1],e.user&&e.user.uid,function(s,r){var n;n=g.map((function(e){return e.id===s?(0,a.Z)((0,a.Z)({},e),{},{respuesta:r}):e})),h(n),e.setAnswers(n)});return(0,f.jsx)("div",{children:w?(0,f.jsx)(v,{resultado:l||[],subgroups:{Liderazgo:"Mayordomia","Administraci\xf3n":"Mayordomia",Pastoreo:"Mayordomia","Ense\xf1anza":"Comunicar",Conocimiento:"Comunicar","Sabidur\xeda":"Comunicar","Profec\xeda":"Comunicar",Evangelismo:"Comunicar",Apostolado:"Comunicar",Fe:"Poder",Discernimiento:"Poder","Exhortaci\xf3n":"Ministrar",Servicio:"Ministrar",Misericordia:"Ministrar",Dar:"Ministrar",Hospitalidad:"Ministrar"},user:e.user,name:e.user.displayName,show:w,dones:S.sort((function(e,s){return s.score-e.score}))}):(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(x,{answers:e.answers,onChange:A,handleSaveProgress:e.handleSaveProgress,buscarDon:function(){var s={id:(new Date).toISOString().slice(0,10)},r=S;i.Z.map((function(n){var o=n.score;g.map((function(e){n.valores.map((function(s){e.id===s&&e.respuesta&&(o+=e.respuesta)}))})),console.log(n.name,o),s[n.name]=o,r=r.map((function(e){return e.id==n.id?(0,a.Z)((0,a.Z)({},e),{},{score:o}):e})),Z(r),e.setDones(r),o&&console.log("actualiza",n.name,r)})),k(!w),console.log("res",s),c(s),e.setResultado(s),e.handleSaveProgress(),e.handleSaveResultado(S,s)},handleResetClick:function(){e.answers.forEach((function(e){A(e.id,0)})),console.log(e.answers),e.handleSaveProgress()}})})})}}}]);
//# sourceMappingURL=702.8a42da18.chunk.js.map